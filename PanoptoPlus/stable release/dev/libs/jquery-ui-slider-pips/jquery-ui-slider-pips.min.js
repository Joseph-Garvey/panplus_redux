!function(e){"use strict";var i={pips:function(i){var l,s,t,a,n,r=this,p="",o=r._valueMin(),d=(r._valueMax()-o)/r.options.step,u=r.element.find(".ui-slider-handle"),f={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:d>100?Math.floor(.05*d):1,formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(i)||"undefined"===e.type(i)){e.extend(f,i),r.element.data("pips-options",f),r.options.pipStep=Math.abs(Math.round(f.step))||1,r.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var c={single:function(i){this.resetClasses(),n.filter(".ui-slider-pip-"+this.classLabel(i)).addClass("ui-slider-pip-selected"),r.options.range&&n.each(function(l,s){var t=e(s).children(".ui-slider-label").data("value");("min"===r.options.range&&t<i||"max"===r.options.range&&t>i)&&e(s).addClass("ui-slider-pip-inrange")})},range:function(i){for(this.resetClasses(),l=0;l<i.length;l++)n.filter(".ui-slider-pip-"+this.classLabel(i[l])).addClass("ui-slider-pip-selected-"+(l+1));r.options.range&&n.each(function(l,s){var t=e(s).children(".ui-slider-label").data("value");t>i[0]&&t<i[1]&&e(s).addClass("ui-slider-pip-inrange")})},classLabel:function(e){return e.toString().replace(".","-")},resetClasses:function(){var e=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;n.removeClass(function(i,l){return(l.match(e)||[]).join(" ")})}};for(p+=v("first"),t=r.options.pipStep;t<d;t+=r.options.pipStep)p+=v(t);for(p+=v("last"),r.element.append(p),n=r.element.find(".ui-slider-pip"),a=e._data(r.element.get(0),"events").mousedown&&e._data(r.element.get(0),"events").mousedown.length?e._data(r.element.get(0),"events").mousedown:r.element.data("mousedown-handlers"),r.element.data("mousedown-handlers",a.slice()),s=0;s<a.length;s++)"slider"===a[s].namespace&&r.element.data("mousedown-original",a[s].handler);r.element.off("mousedown.slider").on("mousedown.selectPip",function(i){var l=e(i.target),s=h(l.data("value")),t=u.eq(s);(t.addClass("ui-state-active"),l.is(".ui-slider-label"))?(!function(i,l){if(!r.option("disabled")){var s=e(i).data("value"),t=h(s);r.values()&&r.values().length?r.options.values[t]=r._trimAlignValue(s):r.options.value=r._trimAlignValue(s),r._refreshValue(),r._change(l,t)}}(l,i),r.element.one("mouseup.selectPip",function(){t.removeClass("ui-state-active").focus()})):r.element.data("mousedown-original")(i)}),r.element.on("slide.selectPip slidechange.selectPip",function(i,l){var s=e(this),t=s.slider("value"),a=s.slider("values");l&&(t=l.value,a=l.values),r.values()&&r.values().length?c.range(a):c.single(t)})}else"destroy"===i?r.element.off(".selectPip").on("mousedown.slider",r.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove():"refresh"===i&&r.element.slider("pips",r.element.data("pips-options"));function h(i){var l,s,t,a,n,p=[],o=0;if(r.values()&&r.values().length){for(t=r.values(),a=e.map(t,function(e){return Math.abs(e-i)}),n=Math.min.apply(Math,a),l=0;l<a.length;l++)a[l]===n&&p.push(l);for(o=p[0],s=0;s<p.length;s++)r._lastChangedValue===p[s]&&(o=p[s]);r.options.range&&2===p.length&&(i>t[1]?o=p[1]:i<t[0]&&(o=p[0]))}return o}function v(i){var s,t,a,n,p,u=i,c="ui-slider-pip",h=r.value(),v=r.values();if("first"===i?u=0:"last"===i&&(u=d),n=(a=o+r.options.step*u).toString().replace(".","-"),p=u+o-o,s="array"===e.type(f.labels)?f.labels[p]||"":"object"===e.type(f.labels)?"first"===i?f.labels.first||"":"last"===i?f.labels.last||"":"array"===e.type(f.labels.rest)?f.labels.rest[p-1]||"":a:a,"first"===i?(t="0%",c+=" ui-slider-pip-first",c+="label"===f.first?" ui-slider-pip-label":"",c+=!1===f.first?" ui-slider-pip-hide":""):"last"===i?(t="100%",c+=" ui-slider-pip-last",c+="label"===f.last?" ui-slider-pip-label":"",c+=!1===f.last?" ui-slider-pip-hide":""):(t=(100/d*i).toFixed(4)+"%",c+="label"===f.rest?" ui-slider-pip-label":"",c+=!1===f.rest?" ui-slider-pip-hide":""),c+=" ui-slider-pip-"+n,v&&v.length){for(l=0;l<v.length;l++)a===v[l]&&(c+=" ui-slider-pip-initial-"+(l+1),c+=" ui-slider-pip-selected-"+(l+1));r.options.range&&a>v[0]&&a<v[1]&&(c+=" ui-slider-pip-inrange")}else a===h&&(c+=" ui-slider-pip-initial",c+=" ui-slider-pip-selected"),r.options.range&&("min"===r.options.range&&a<h||"max"===r.options.range&&a>h)&&(c+=" ui-slider-pip-inrange");return'<span class="'+c+'" style="'+("horizontal"===r.options.orientation?"left: "+t:"bottom: "+t)+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+a+'">'+f.formatLabel(s)+"</span></span>"}},float:function(i){var l,s=this,t=s._valueMin(),a=s._valueMax(),n=s._value(),r=s._values(),p=[],o=s.element.find(".ui-slider-handle"),d={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(i)||"undefined"===e.type(i)){if(e.extend(d,i),s.element.data("float-options",d),n<t&&(n=t),n>a&&(n=a),r&&r.length)for(l=0;l<r.length;l++)r[l]<t&&(r[l]=t),r[l]>a&&(r[l]=a);if(s.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),d.handle)for(p=s.values()&&s.values().length?u(r):u([n]),l=0;l<p.length;l++)o.eq(l).append(e('<span class="ui-slider-tip">'+d.formatLabel(p[l])+"</span>"));d.pips&&s.element.find(".ui-slider-label").each(function(i,l){var s,t=e(l),a=[t.data("value")];s=d.formatLabel(u(a)[0]),e('<span class="ui-slider-tip-label">'+s+"</span>").insertAfter(t)}),"slide"!==d.event&&"slidechange"!==d.event&&"slide slidechange"!==d.event&&"slidechange slide"!==d.event&&(d.event="slidechange slide"),s.element.off(".sliderFloat").on(d.event+".sliderFloat",function(i,l){var s="array"===e.type(l.value)?l.value:[l.value],t=d.formatLabel(u(s)[0]);e(l.handle).find(".ui-slider-tip").html(t)})}else"destroy"===i?s.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove():"refresh"===i&&s.element.slider("float",s.element.data("float-options"));function u(i){var n=[],r=e.map(i,function(e){return Math.ceil((e-t)/s.options.step)});if("array"===e.type(d.labels))for(l=0;l<i.length;l++)n[l]=d.labels[r[l]]||i[l];else if("object"===e.type(d.labels))for(l=0;l<i.length;l++)i[l]===t?n[l]=d.labels.first||t:i[l]===a?n[l]=d.labels.last||a:"array"===e.type(d.labels.rest)?n[l]=d.labels.rest[r[l]-1]||i[l]:n[l]=i[l];else for(l=0;l<i.length;l++)n[l]=i[l];return n}}};e.extend(!0,e.ui.slider.prototype,i)}(jQuery);